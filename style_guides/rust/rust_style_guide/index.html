<!DOCTYPE html>
<html lang="en" class="palette-1"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>DevSet | Development Standards and Tooling</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="DevSet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Development Standards and Tooling" />
<meta property="og:description" content="Development Standards and Tooling" />
<link rel="canonical" href="https://toxicoder.github.io/devset/style_guides/rust/rust_style_guide/" />
<meta property="og:url" content="https://toxicoder.github.io/devset/style_guides/rust/rust_style_guide/" />
<meta property="og:site_name" content="DevSet" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="DevSet" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Development Standards and Tooling","headline":"DevSet","url":"https://toxicoder.github.io/devset/style_guides/rust/rust_style_guide/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/devset/assets/css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://toxicoder.github.io/devset/feed.xml" title="DevSet" /><script>
    window.searchUrl = "/devset/search.json";
  </script>
</head>
<!-- Extra CSS -->
  

  <body><header class="app-bar">
  <button id="menu-toggle" class="btn btn-outlined" style="margin-right: 16px; display: none;" aria-label="Toggle navigation">
    <span style="font-size: 20px;">‚ò∞</span>
  </button>
  <div class="title">
    <a href="/devset/" style="color: inherit;">DevSet</a>
  </div>
  <div style="flex: 1;"></div>
  <div class="nav-controls">
    <a href="https://github.com/toxicoder/materialistic-jekyll" class="icon-btn outlined" aria-label="GitHub Repository" style="margin-left: 8px;" target="_blank" rel="noopener noreferrer">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
      </svg>
    </a>
    <button id="theme-settings-btn" class="icon-btn outlined" aria-label="Theme Settings" style="margin-left: 8px;">
      <span style="font-size: 20px;">üé®</span>
    </button>
    <div id="theme-dialog" class="dialog modal" style="display: none; opacity: 0; transition: opacity 0.2s; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100;">
  <h3 class="dialog-headline">Theme Settings</h3>
  <div class="dialog-content">

    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
      <span style="font-size: 16px; font-weight: 500;">Dark Mode</span>
      <label class="switch">
        <input type="checkbox" id="dark-mode-switch">
        <span class="slider-track"></span>
      </label>
    </div>

    <div style="margin-bottom: 16px;">
      <span style="font-size: 16px; font-weight: 500; display: block; margin-bottom: 12px;">Color Palette</span>
      <div class="palette-grid">
        
          <button class="palette-swatch" data-palette-id="palette-1" aria-label="Purple" title="Purple" style="background-color: #4B11E3;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-2" aria-label="Red 2" title="Red 2" style="background-color: #DB5E83;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-3" aria-label="Red 3" title="Red 3" style="background-color: #A62952;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-4" aria-label="Red 4" title="Red 4" style="background-color: #CF0B3D;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-5" aria-label="Orange 5" title="Orange 5" style="background-color: #AA4909;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-6" aria-label="Gold" title="Gold" style="background-color: #6D5906;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-7" aria-label="Green 7" title="Green 7" style="background-color: #4E6105;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-8" aria-label="Green 8" title="Green 8" style="background-color: #0C8F08;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-9" aria-label="Teal" title="Teal" style="background-color: #06695A;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-10" aria-label="Cyan 10" title="Cyan 10" style="background-color: #06636E;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-11" aria-label="Blue 11" title="Blue 11" style="background-color: #07618C;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-12" aria-label="Blue 12" title="Blue 12" style="background-color: #0A54C5;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-13" aria-label="Blue 13" title="Blue 13" style="background-color: #3824C1;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-14" aria-label="Purple 14" title="Purple 14" style="background-color: #912AAA;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-15" aria-label="Red 15" title="Red 15" style="background-color: #C70B3D;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-16" aria-label="Red" title="Red" style="background-color: #CE120B;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-17" aria-label="Red 17" title="Red 17" style="background-color: #BD2A0A;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-18" aria-label="Orange 18" title="Orange 18" style="background-color: #8D4A07;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-19" aria-label="Orange 19" title="Orange 19" style="background-color: #755606;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-20" aria-label="Yellow 20" title="Yellow 20" style="background-color: #5B5D05;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-21" aria-label="Green 21" title="Green 21" style="background-color: #447806;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-22" aria-label="Cyan 22" title="Cyan 22" style="background-color: #056839;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-23" aria-label="Cyan 23" title="Cyan 23" style="background-color: #056761;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-24" aria-label="Blue 24" title="Blue 24" style="background-color: #07627D;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-25" aria-label="Deep Blue" title="Deep Blue" style="background-color: #0A60B7;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-26" aria-label="Blue 26" title="Blue 26" style="background-color: #0C30E5;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-27" aria-label="Blue 27" title="Blue 27" style="background-color: #540EE3;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-28" aria-label="Purple 28" title="Purple 28" style="background-color: #A214C8;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-29" aria-label="Pink 29" title="Pink 29" style="background-color: #D10B79;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-30" aria-label="Pink" title="Pink" style="background-color: #D30B3A;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-31" aria-label="Red 31" title="Red 31" style="background-color: #B60A13;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-32" aria-label="Red 32" title="Red 32" style="background-color: #B02609;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-33" aria-label="Orange 33" title="Orange 33" style="background-color: #9A4108;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-34" aria-label="Orange 34" title="Orange 34" style="background-color: #805107;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-35" aria-label="Yellow 35" title="Yellow 35" style="background-color: #655C05;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-36" aria-label="Green 36" title="Green 36" style="background-color: #4A6205;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-37" aria-label="Green 37" title="Green 37" style="background-color: #286705;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-38" aria-label="Green 38" title="Green 38" style="background-color: #05682F;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-39" aria-label="Cyan 39" title="Cyan 39" style="background-color: #056751;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-40" aria-label="Cyan 40" title="Cyan 40" style="background-color: #06646C;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-41" aria-label="Blue 41" title="Blue 41" style="background-color: #076189;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-42" aria-label="Blue 42" title="Blue 42" style="background-color: #0B50D0;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-43" aria-label="Blue 43" title="Blue 43" style="background-color: #181DDD;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-44" aria-label="Purple 44" title="Purple 44" style="background-color: #6E19C9;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-45" aria-label="Pink 45" title="Pink 45" style="background-color: #C0109C;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-46" aria-label="Red 46" title="Red 46" style="background-color: #D50B4C;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-47" aria-label="Red 47" title="Red 47" style="background-color: #DB0C16;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-48" aria-label="Red 48" title="Red 48" style="background-color: #C31A0A;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-49" aria-label="Orange 49" title="Orange 49" style="background-color: #954608;">
          </button>
        
          <button class="palette-swatch" data-palette-id="palette-50" aria-label="Orange 50" title="Orange 50" style="background-color: #775506;">
          </button>
        
      </div>
    </div>

  </div>
  <div class="dialog-actions">
    <button class="btn btn-text" id="close-theme-dialog">Close</button>
  </div>
</div>
<!-- Backdrop -->
<div id="theme-backdrop" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.32); z-index: 99; opacity: 0; transition: opacity 0.2s;"></div>

  </div>
</header>
<div class="main-container"><main class="content" aria-label="Content">
        <h1 id="rust-style-guide">Rust Style Guide</h1>

<p>This document outlines the coding standards and best practices for Rust development within this project. Adhering to these guidelines ensures code consistency, safety, performance, and maintainability.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="#general-principles">General Principles</a></li>
  <li><a href="#code-layout">Code Layout</a></li>
  <li><a href="#naming-conventions">Naming Conventions</a></li>
  <li><a href="#documentation">Documentation</a></li>
  <li><a href="#types-and-traits">Types and Traits</a></li>
  <li><a href="#error-handling">Error Handling</a></li>
  <li><a href="#ownership-and-borrowing">Ownership and Borrowing</a></li>
  <li><a href="#concurrency">Concurrency</a></li>
  <li><a href="#unsafe-code">Unsafe Code</a></li>
  <li><a href="#modules-and-crates">Modules and Crates</a></li>
  <li><a href="#macros">Macros</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#dependencies">Dependencies</a></li>
  <li><a href="#recommended-tools">Recommended Tools</a></li>
</ol>

<h2 id="general-principles">General Principles</h2>

<ul>
  <li><strong>Safety</strong>: Leverage the type system and borrow checker to ensure memory safety and thread safety. Avoid <code class="language-plaintext highlighter-rouge">unsafe</code> unless absolutely necessary.</li>
  <li><strong>Performance</strong>: Aim for zero-cost abstractions. Use the most efficient algorithms and data structures suitable for the task.</li>
  <li><strong>Fearless Concurrency</strong>: Use Rust‚Äôs ownership model to write concurrent code without data races.</li>
  <li><strong>Idiomatic Rust</strong>: Write ‚ÄúRustacean‚Äù code. Follow community standards and idioms (e.g., using iterators, pattern matching, RAII).</li>
  <li><strong>Clarity</strong>: Code should be easy to understand. Explicit is better than implicit.</li>
</ul>

<h2 id="code-layout">Code Layout</h2>

<ul>
  <li><strong>Formatting</strong>: Use <a href="https://github.com/rust-lang/rustfmt"><code class="language-plaintext highlighter-rouge">rustfmt</code></a> with default settings. Do not manually format code in ways that <code class="language-plaintext highlighter-rouge">rustfmt</code> would undo.</li>
  <li><strong>Indentation</strong>: Use 4 spaces for indentation.</li>
  <li><strong>Line Length</strong>: Limit lines to 100 characters (default <code class="language-plaintext highlighter-rouge">rustfmt</code> setting).</li>
  <li><strong>Braces</strong>: Use K&amp;R style braces (1tbs). Opening brace on the same line, closing brace on its own line.</li>
  <li><strong>Imports</strong>:
    <ul>
      <li>Group imports by crate.</li>
      <li>Use <code class="language-plaintext highlighter-rouge">std</code>, <code class="language-plaintext highlighter-rouge">external_crate</code>, <code class="language-plaintext highlighter-rouge">crate</code>, <code class="language-plaintext highlighter-rouge">super</code>, <code class="language-plaintext highlighter-rouge">self</code> order.</li>
      <li>Avoid wildcard imports (<code class="language-plaintext highlighter-rouge">use foo::*;</code>) except for preludes or tests.</li>
    </ul>
  </li>
  <li><strong>Match Arms</strong>: Comma-separate match arms. Use braces for multi-line arms.</li>
</ul>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">sync</span><span class="p">::</span><span class="nb">Arc</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">serde</span><span class="p">::{</span><span class="n">Deserialize</span><span class="p">,</span> <span class="n">Serialize</span><span class="p">};</span>

<span class="k">use</span> <span class="k">crate</span><span class="p">::</span><span class="nn">models</span><span class="p">::</span><span class="n">User</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="naming-conventions">Naming Conventions</h2>

<ul>
  <li><strong>Variables/Functions/Modules</strong>: <code class="language-plaintext highlighter-rouge">snake_case</code></li>
  <li><strong>Types/Traits/Enum Variants</strong>: <code class="language-plaintext highlighter-rouge">UpperCamelCase</code> (PascalCase)</li>
  <li><strong>Constants/Statics</strong>: <code class="language-plaintext highlighter-rouge">SCREAMING_SNAKE_CASE</code></li>
  <li><strong>Lifetimes</strong>: <code class="language-plaintext highlighter-rouge">'short_lowercase</code> (e.g., <code class="language-plaintext highlighter-rouge">'a</code>, <code class="language-plaintext highlighter-rouge">'ctx</code>)</li>
  <li><strong>Macros</strong>: <code class="language-plaintext highlighter-rouge">snake_case!</code></li>
  <li><strong>Getters</strong>: Use <code class="language-plaintext highlighter-rouge">field_name()</code> not <code class="language-plaintext highlighter-rouge">get_field_name()</code>.</li>
  <li><strong>Conversion</strong>: <code class="language-plaintext highlighter-rouge">as_type()</code> (borrowed), <code class="language-plaintext highlighter-rouge">to_type()</code> (owned/expensive), <code class="language-plaintext highlighter-rouge">into_type()</code> (consuming).</li>
  <li><strong>Constructors</strong>: <code class="language-plaintext highlighter-rouge">new()</code> for the primary constructor. <code class="language-plaintext highlighter-rouge">with_params()</code> for others.</li>
</ul>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">UserConfig</span> <span class="p">{</span>
    <span class="n">max_retries</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">UserConfig</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="k">Self</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">max_retries</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span> <span class="k">self</span><span class="py">.max_retries</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="documentation">Documentation</h2>

<ul>
  <li><strong>Doc Comments</strong>: Use <code class="language-plaintext highlighter-rouge">///</code> for documenting items (functions, structs, enums) and <code class="language-plaintext highlighter-rouge">//!</code> for documenting the containing module/crate.</li>
  <li><strong>Format</strong>: Use Markdown. The first line should be a concise summary.</li>
  <li><strong>Sections</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge"># Examples</code>: Show how to use the item. These are run as doctests.</li>
      <li><code class="language-plaintext highlighter-rouge"># Panics</code>: Document conditions under which the function may panic.</li>
      <li><code class="language-plaintext highlighter-rouge"># Errors</code>: Document the error conditions and types returned.</li>
      <li><code class="language-plaintext highlighter-rouge"># Safety</code>: Mandatory for <code class="language-plaintext highlighter-rouge">unsafe</code> functions. Explain the invariants the caller must uphold.</li>
    </ul>
  </li>
  <li><strong>Completeness</strong>: All public items (<code class="language-plaintext highlighter-rouge">pub</code>) must be documented.</li>
</ul>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/// Divides two numbers.</span>
<span class="cd">///</span>
<span class="cd">/// # Examples</span>
<span class="cd">///</span>
<span class="cd">/// ```</span>
<span class="cd">/// let result = my_crate::div(10, 2);</span>
<span class="cd">/// assert_eq!(result, Some(5));</span>
<span class="cd">/// ```</span>
<span class="cd">///</span>
<span class="cd">/// # Panics</span>
<span class="cd">///</span>
<span class="cd">/// Panics if `b` is 0.</span>
<span class="k">pub</span> <span class="k">fn</span> <span class="nf">div</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="nd">panic!</span><span class="p">(</span><span class="s">"division by zero"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="types-and-traits">Types and Traits</h2>

<ul>
  <li><strong>Newtype Pattern</strong>: Use tuple structs (<code class="language-plaintext highlighter-rouge">struct UserId(u64);</code>) to enforce type safety and avoid primitives obsession.</li>
  <li><strong>Generics vs Trait Objects</strong>: Prefer generics (static dispatch) for performance. Use trait objects (<code class="language-plaintext highlighter-rouge">Box&lt;dyn Trait&gt;</code>) when you need dynamic dispatch or heterogeneous collections.</li>
  <li><strong>Standard Traits</strong>: Implement standard traits like <code class="language-plaintext highlighter-rouge">Debug</code>, <code class="language-plaintext highlighter-rouge">Clone</code>, <code class="language-plaintext highlighter-rouge">Default</code>, <code class="language-plaintext highlighter-rouge">PartialEq</code> whenever appropriate. Use <code class="language-plaintext highlighter-rouge">#[derive(...)]</code>.</li>
  <li><strong>From/Into</strong>: Implement <code class="language-plaintext highlighter-rouge">From&lt;T&gt;</code> (which gives you <code class="language-plaintext highlighter-rouge">Into&lt;T&gt;</code> for free) for fallible type conversions. Implement <code class="language-plaintext highlighter-rouge">TryFrom</code> for fallible conversions.</li>
  <li><strong>AsRef/Borrow</strong>: Use <code class="language-plaintext highlighter-rouge">AsRef</code> for argument types to accept different representations (e.g., <code class="language-plaintext highlighter-rouge">path: impl AsRef&lt;Path&gt;</code>).</li>
</ul>

<h2 id="error-handling">Error Handling</h2>

<ul>
  <li><strong>Result</strong>: Use <code class="language-plaintext highlighter-rouge">Result&lt;T, E&gt;</code> for recoverable errors.</li>
  <li><strong>Option</strong>: Use <code class="language-plaintext highlighter-rouge">Option&lt;T&gt;</code> for values that may be absent.</li>
  <li><strong>Unwrap/Expect</strong>: Avoid <code class="language-plaintext highlighter-rouge">unwrap()</code> in production code. Use <code class="language-plaintext highlighter-rouge">expect("reason")</code> if you are certain it cannot fail (and explaining why helps). In tests, <code class="language-plaintext highlighter-rouge">unwrap()</code> is acceptable.</li>
  <li><strong>Error Types</strong>:
    <ul>
      <li>For libraries: Define custom error enums using <a href="https://github.com/dtolnay/thiserror"><code class="language-plaintext highlighter-rouge">thiserror</code></a>. Expose a public <code class="language-plaintext highlighter-rouge">Error</code> type.</li>
      <li>For applications: Use <a href="https://github.com/dtolnay/anyhow"><code class="language-plaintext highlighter-rouge">anyhow</code></a> for easy error handling and context propagation.</li>
    </ul>
  </li>
  <li><strong>Question Mark</strong>: Use the <code class="language-plaintext highlighter-rouge">?</code> operator for error propagation.</li>
  <li><strong>Panics</strong>: Only panic for unrecoverable errors (bugs, violated invariants).</li>
</ul>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">anyhow</span><span class="p">::{</span><span class="n">Context</span><span class="p">,</span> <span class="nb">Result</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">read_config</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="nf">.with_context</span><span class="p">(||</span> <span class="nd">format!</span><span class="p">(</span><span class="s">"Failed to read config from {}"</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ownership-and-borrowing">Ownership and Borrowing</h2>

<ul>
  <li><strong>Borrowing</strong>: Prefer borrowing (<code class="language-plaintext highlighter-rouge">&amp;T</code>) over taking ownership (<code class="language-plaintext highlighter-rouge">T</code>) if the function doesn‚Äôt need to consume the value.</li>
  <li><strong>Cloning</strong>: Avoid explicit <code class="language-plaintext highlighter-rouge">clone()</code> calls unless necessary. If a type is cheap to copy, implement <code class="language-plaintext highlighter-rouge">Copy</code>.</li>
  <li><strong>Lifetimes</strong>: Elide lifetimes where possible. Use descriptive lifetime names if there are multiple or complex relationships.</li>
  <li><strong>Interior Mutability</strong>: Use <code class="language-plaintext highlighter-rouge">Cell</code> or <code class="language-plaintext highlighter-rouge">RefCell</code> for single-threaded interior mutability. Use <code class="language-plaintext highlighter-rouge">Mutex</code> or <code class="language-plaintext highlighter-rouge">RwLock</code> for multi-threaded scenarios.</li>
</ul>

<h2 id="concurrency">Concurrency</h2>

<ul>
  <li><strong>Send/Sync</strong>: Understand <code class="language-plaintext highlighter-rouge">Send</code> (safe to move to another thread) and <code class="language-plaintext highlighter-rouge">Sync</code> (safe to share between threads). Most types are automatically both.</li>
  <li><strong>Async/Await</strong>: Use <code class="language-plaintext highlighter-rouge">async</code>/<code class="language-plaintext highlighter-rouge">await</code> for I/O-bound tasks.</li>
  <li><strong>Runtimes</strong>: We prefer <a href="https://tokio.rs/"><code class="language-plaintext highlighter-rouge">tokio</code></a> as the standard async runtime.</li>
  <li><strong>Channels</strong>: Use channels (<code class="language-plaintext highlighter-rouge">tokio::sync::mpsc</code>) for message passing between tasks instead of sharing memory.</li>
  <li><strong>Blocking</strong>: Never block an async thread. Use <code class="language-plaintext highlighter-rouge">tokio::task::spawn_blocking</code> for CPU-intensive or blocking synchronous operations.</li>
</ul>

<h2 id="unsafe-code">Unsafe Code</h2>

<ul>
  <li><strong>Avoid</strong>: Use <code class="language-plaintext highlighter-rouge">unsafe</code> only when absolutely necessary (e.g., FFI, low-level optimizations verified by benchmarks).</li>
  <li><strong>Isolation</strong>: Keep <code class="language-plaintext highlighter-rouge">unsafe</code> blocks as small as possible.</li>
  <li><strong>Safety Comments</strong>: Every <code class="language-plaintext highlighter-rouge">unsafe</code> block MUST be preceded by a <code class="language-plaintext highlighter-rouge">// SAFETY:</code> comment explaining why the operation is safe and how invariants are maintained.</li>
  <li><strong>API Safety</strong>: Ensure that <code class="language-plaintext highlighter-rouge">unsafe</code> blocks inside a safe function do not expose undefined behavior to the caller.</li>
</ul>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SAFETY: We checked that `index` is within bounds.</span>
<span class="k">unsafe</span> <span class="p">{</span>
    <span class="o">*</span><span class="n">ptr</span><span class="nf">.add</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="modules-and-crates">Modules and Crates</h2>

<ul>
  <li><strong>Visibility</strong>: Minimize visibility. Use <code class="language-plaintext highlighter-rouge">pub(crate)</code> for items shared within the crate but not exposed publicly.</li>
  <li><strong>Prelude</strong>: If your library has many commonly used items, consider providing a <code class="language-plaintext highlighter-rouge">prelude</code> module.</li>
  <li><strong>Structure</strong>:
    <ul>
      <li>Place unit tests in a <code class="language-plaintext highlighter-rouge">tests</code> module within the same file (<code class="language-plaintext highlighter-rouge">#[cfg(test)]</code>).</li>
      <li>Place integration tests in the <code class="language-plaintext highlighter-rouge">tests/</code> directory at the crate root.</li>
      <li>Avoid deep module nesting.</li>
    </ul>
  </li>
</ul>

<h2 id="macros">Macros</h2>

<ul>
  <li><strong>Usage</strong>: Use macros sparingly. Prefer functions and generics where possible.</li>
  <li><strong>Declarative</strong>: Use <code class="language-plaintext highlighter-rouge">macro_rules!</code> for simple pattern matching macros.</li>
  <li><strong>Procedural</strong>: Use procedural macros (derive, attribute, function-like) for complex code generation, but be mindful of compile times.</li>
</ul>

<h2 id="testing">Testing</h2>

<ul>
  <li><strong>Unit Tests</strong>: Write unit tests for all private and public logic. Keep them in the same file as the code.</li>
  <li><strong>Integration Tests</strong>: Test the public API in <code class="language-plaintext highlighter-rouge">tests/</code>.</li>
  <li><strong>Property-Based Testing</strong>: Consider <a href="https://github.com/proptest-rs/proptest"><code class="language-plaintext highlighter-rouge">proptest</code></a> for testing a wide range of inputs.</li>
  <li><strong>Mocking</strong>: Use <a href="https://github.com/asomers/mockall"><code class="language-plaintext highlighter-rouge">mockall</code></a> for mocking traits in tests.</li>
  <li><strong>Doctests</strong>: Ensure examples in documentation compile and pass.</li>
</ul>

<h2 id="dependencies">Dependencies</h2>

<ul>
  <li><strong>Selection</strong>: Choose well-maintained, popular crates (check downloads, recent updates).</li>
  <li><strong>Audit</strong>: Use <a href="https://github.com/rustsec/rustsec/tree/main/cargo-audit"><code class="language-plaintext highlighter-rouge">cargo audit</code></a> to check for security vulnerabilities.</li>
  <li><strong>Features</strong>: Disable unused features to reduce compile times and binary size (<code class="language-plaintext highlighter-rouge">default-features = false</code>).</li>
  <li><strong>Heavy Dependencies</strong>: Be cautious with heavy dependencies like <code class="language-plaintext highlighter-rouge">serde</code>, <code class="language-plaintext highlighter-rouge">tokio</code>, <code class="language-plaintext highlighter-rouge">syn</code>. Only include what you need.</li>
</ul>

<h2 id="recommended-tools">Recommended Tools</h2>

<ul>
  <li><strong>Format</strong>: <a href="https://github.com/rust-lang/rustfmt"><code class="language-plaintext highlighter-rouge">rustfmt</code></a> (standard formatter).</li>
  <li><strong>Lint</strong>: <a href="https://github.com/rust-lang/rust-clippy"><code class="language-plaintext highlighter-rouge">clippy</code></a> (catch common mistakes and improve code). Run <code class="language-plaintext highlighter-rouge">cargo clippy</code> in CI.</li>
  <li><strong>Check</strong>: <code class="language-plaintext highlighter-rouge">cargo check</code> (fast compilation check).</li>
  <li><strong>Test</strong>: <code class="language-plaintext highlighter-rouge">cargo test</code>.</li>
  <li><strong>Audit</strong>: <code class="language-plaintext highlighter-rouge">cargo audit</code> (security).</li>
  <li><strong>Expand</strong>: <a href="https://github.com/dtolnay/cargo-expand"><code class="language-plaintext highlighter-rouge">cargo expand</code></a> (view macro expansion).</li>
  <li><strong>IDE</strong>: <a href="https://rust-analyzer.github.io/"><code class="language-plaintext highlighter-rouge">rust-analyzer</code></a> (LSP).</li>
</ul>

      </main>
    </div><footer class="footer">
  <div class="wrapper">
    <p>DevSet &copy; 2026</p>
  </div>
</footer>
<script src="/devset/assets/js/main.js"></script>
    <script src="/devset/assets/js/search.js"></script>

    <!-- Extra JS -->
    

  </body>

</html>
