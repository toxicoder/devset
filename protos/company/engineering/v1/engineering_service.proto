syntax = "proto3";

package company.engineering.v1;

option go_package = "github.com/toxicoder/devset/gen/go/company/engineering/v1;engineeringv1";

import "company/engineering/v1/repository.proto";
import "company/engineering/v1/incident.proto";

service EngineeringService {
  rpc CreateRepository(CreateRepositoryRequest) returns (CreateRepositoryResponse);
  rpc ReportIncident(ReportIncidentRequest) returns (ReportIncidentResponse);
  rpc UpdateIncidentStatus(UpdateIncidentStatusRequest) returns (UpdateIncidentStatusResponse);
}

message CreateRepositoryRequest { Repository repository = 1; }
message CreateRepositoryResponse { Repository repository = 1; }

message ReportIncidentRequest {
  string title = 1;
  IncidentSeverity severity = 2;
  string summary = 3;
  repeated string affected_services = 4;
}
message ReportIncidentResponse { Incident incident = 1; }

message UpdateIncidentStatusRequest {
  string incident_id = 1;
  IncidentStatus status = 2;
}
message UpdateIncidentStatusResponse { Incident incident = 1; }
